!function(){var e=$(j_m.currPage[0]),i=j_m.currPage;i.hook(function(){var a=i.vm;a?a.video_id=j_m.cateHash.video_id:a=i.vm=new Vue({el:e[0],data:{v:{},video_id:j_m.cateHash.video_id,comment:"",cmt:{}},created:function(){},beforeCompile:function(){},compiled:function(){},update:function(){},ready:function(){Junb.addClass(i[0],"ready"),j_m.compilePage(),setTimeout(function(){j_m.compilePage()},100)},methods:{del:function(e){Util.SelectAlert([{id:!0,value:"确认删除"},{id:!1,value:"不删除了"}],function(e){e.id&&Util.callService({url:oUserinfo.addr["interface"]+"/index.php?d=account&c=video&m=delMyVideo",paras:{video_id:j_m.cateHash.video_id},callback:function(e){0===+e.errcode?(Util.Alert("删除成功"),j_m.changeHash("main")):Util.Alert("删除失败")}})})},fnComment:function(e){var i=this;return i.comment?void Util.callService({url:oUserinfo.addr["interface"]+"/index.php?d=account&c=video&m=comment",paras:{video_id:j_m.cateHash.video_id,content:i.comment},callback:function(e){0==e.errcode&&(Util.Alert("评论成功"),i.comment="",i.v.comments=+i.v.comments+1,t())}}):void Util.Alert("评论内容不能为空")},condTip:function(e,i){"like"===i&&Util.callService({url:oUserinfo.addr["interface"]+"/index.php?d=account&c=video&m=like",paras:{video_id:j_m.cateHash.video_id,act:a.v.liked?2:1},callback:function(e){a.v.likes=a.v.liked?a.v.likes-1:a.v.likes+1,a.v.liked=!a.v.liked}})}}}),Util.callService({url:oUserinfo.addr["interface"]+"/index.php?d=account&c=video&m=getVideoDetail&stamp="+(new Date).getTime(),paras:{video_id:j_m.cateHash.video_id},callback:function(i){return 2e3===i.errcode?(Util.Alert("无此视频"),void j_m.changeHash("main")):(a.v=i.data,a.$set("v.likes",+a.v.likes),a.$set("v.liked",1==a.v.liked),a.sewise_src="../pub/sewise-player/sewise-player/player/sewise.player.min.js?server=vod&type=mp4&videourl="+a.v.video_url+"&media_id=AR25sJ0Z2qjD7sTNkISV0klbGFSqBJqNZT7B14DeeQdc_rw2WidHpVUyUNDEhzn0&sourceid=&autostart=false&starttime=0&lang=en_US&title=VodVideo&buffer=5&claritybutton=disable&skin=vodFlowPlayer&fallbackurls=%7B%0A%09%22ogg%22%3A%20%22http%3A%2F%2Fjackzhang1204.github.io%2Fmaterials%2Fmov_bbb.ogg%22%2C%0A%09%22webm%22%3A%20%22http%3A%2F%2Fjackzhang1204.github.io%2Fmaterials%2Fmov_bbb.webm%22%0A%7D&topbardisplay=disable&poster="+a.v.video_cover,e.find(".video-box").html("<script src='"+a.sewise_src+"'></script>"),void j_m.compilePage())}});var t=function(){Util.callService({url:oUserinfo.addr["interface"]+"/index.php?d=account&c=video&m=getCommentList",paras:{video_id:a.video_id},callback:function(e){a.cmt=e.data.reverse(),setTimeout(function(){j_m.compilePage()})}})};t(),Util.callService({url:oUserinfo.addr["interface"]+"/index.php?d=account&c=video&m=view",paras:{video_id:a.video_id},callback:function(e){}})})}();